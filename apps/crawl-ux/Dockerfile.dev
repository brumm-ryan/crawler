# Development Dockerfile for crawl-ux with hot reloading
FROM node:22-alpine

# Enable pnpm
RUN corepack enable \
    && corepack prepare pnpm@9.15.0 --activate

WORKDIR /app

# Copy workspace configuration and package.json files for caching
COPY pnpm-workspace.yaml pnpm-lock.yaml package.json ./
COPY packages/shared-contracts/package.json ./packages/shared-contracts/
COPY apps/crawl-ux/package.json ./apps/crawl-ux/

# Install dependencies
RUN pnpm install --frozen-lockfile

# Expose port for Vite dev server
EXPOSE 3000

# Set working directory to the app
WORKDIR /app/apps/crawl-ux

# Start development server with hot reloading
CMD ["pnpm", "dev", "--host"]